webpackJsonp([3],{ALDf:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e("0J0o"),n=e("P9l9"),i={props:{pics:{type:Array,default:function(){return[]}},width:{type:String,default:"200px"},flag:{type:Number,default:1}},methods:{handleRemove:function(){this.$emit("listenFileRemove")},handleFormatError:function(t){this.$Notice.warning({title:"图片格式错误",desc:"仅支持jpg,jpeg,png三种格式上传"})},handleMaxSize:function(t){this.$Notice.warning({title:"图片过大",desc:"图片过大，最多支持2M"})},uploadFunc:function(t){var a=new FormData;return a.append("file",t),this.$emit("listenFileUpload",a,this.flag),!1}}},d={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.pics.length&&""!=t.pics[0]&&t.pics[0]?[e("div",{staticClass:"demo-upload-list",style:{width:t.width}},[e("img",{attrs:{src:t.pics[0]}}),t._v(" "),e("div",{staticClass:"demo-upload-list-cover"},[e("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(a){return t.handleRemove(a)}}})],1)])]:[e("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"100%"},attrs:{"show-upload-list":!1,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,type:"drag",action:"","before-upload":t.uploadFunc}},[e("div",{staticStyle:{"line-height":"100%",height:"100%"}},[e("Icon",{attrs:{type:"ios-camera",size:"35"}})],1)])]],2)},staticRenderFns:[]};var l=e("VU/8")(i,d,!1,function(t){e("bC7Q")},"data-v-d4c36880",null).exports,r=e("rho9"),s={name:"api_user",components:{Tables:o.a,MyUpload:l},data:function(){var t=this;return{pics:[],modifyModal:{open:!1,formData:{}},addModal:{open:!1,formData:{}},table_title:[{title:"ID",key:"id",width:70,align:"center"},{title:"名称",key:"nickname",width:90,align:"center"},{title:"头像",key:"header"},{title:"接口名",key:"name",width:80,align:"center"},{title:"类型",key:"type",width:100,align:"center",render:function(a,e){return a("div",t.getType(e.row.type))}},{title:"操作",key:"oparate",width:100,align:"center",render:function(a,e){return a("div",[a("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){t.openModifyModal(e.row)}}},"修改")])}}],table_data:[],searchField:[[{key:"flag",type:"select",fields:{1:"江苏",2:"湖北",3:"吉林",4:"河北",5:"甘肃",6:"上海"},placeholder:"姓名",name:"接口名"}]],loading:!1,total:100,pageSize:10}},methods:{getSearchData:function(t){var a=this;this.loading=!0,n.a.get("api/getPlanUser",t).then(function(t){a.table_data=t.req.data.data.list,a.total=t.req.data.data.total}),this.loading=!1},getResetData:function(t){this.getSearchData(t)},getType:function(t){switch(t){case 1:return"民间高手";case 2:return"业内专家"}},openModifyModal:function(t){this.modifyModal.open=!0,this.modifyModal.formData={id:t.id,nickname:t.nickname,header:t.header,type:""+t.type}},openAddModal:function(){this.addModal.open=!0,this.addModal.formData={header:"",nickname:"",type:"",flag:""}},modify:function(){Object(r.b)("api/modifyPlanUser",this)},add:function(){Object(r.a)("api/addPlanUser",this)},reset:function(t){Object(r.d)(t,this)},uploadFile:function(t,a){Object(r.e)(t,a,this)},removeFile:function(t){Object(r.c)(t,this)}},mounted:function(){this.getSearchData({pageSize:this.pageSize,page:1})}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("Button",{attrs:{type:"primary"},on:{click:t.openAddModal}},[t._v("添加")]),t._v(" "),e("Tables",{attrs:{border:"",columns:t.table_title,data:t.table_data,searchField:t.searchField,loading:t.loading,total:t.total,pageSize:t.pageSize},on:{listenFormData:t.getSearchData,listenResetFormData:t.getResetData}}),t._v(" "),e("Modal",{attrs:{width:"660"},on:{"on-cancel":function(a){t.reset(1)}},model:{value:t.modifyModal.open,callback:function(a){t.$set(t.modifyModal,"open",a)},expression:"modifyModal.open"}},[e("p",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("修改")])]),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("Form",{ref:"modifyModal.formData",attrs:{model:t.modifyModal.formData,"label-width":80}},[e("FormItem",{attrs:{label:"ID"}},[e("Input",{attrs:{type:"text",readonly:!0},model:{value:t.modifyModal.formData.id,callback:function(a){t.$set(t.modifyModal.formData,"id",a)},expression:"modifyModal.formData.id"}})],1),t._v(" "),e("FormItem",{attrs:{label:"名称"}},[e("Input",{attrs:{type:"text"},model:{value:t.modifyModal.formData.nickname,callback:function(a){t.$set(t.modifyModal.formData,"nickname",a)},expression:"modifyModal.formData.nickname"}})],1),t._v(" "),e("FormItem",{attrs:{label:"头像"}},[e("MyUpload",{attrs:{pics:[t.modifyModal.formData.header],flag:1},on:{listenFileUpload:t.uploadFile,listenFileRemove:function(a){t.removeFile(1)}}})],1),t._v(" "),e("FormItem",{attrs:{label:"类型",prop:"type"}},[e("Select",{model:{value:t.modifyModal.formData.type,callback:function(a){t.$set(t.modifyModal.formData,"type",a)},expression:"modifyModal.formData.type"}},[e("Option",{attrs:{value:"1"}},[t._v("民间高手")]),t._v(" "),e("Option",{attrs:{value:"2"}},[t._v("业内专家")])],1)],1)],1)],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"primary",disabled:t.loading},on:{click:t.modify}},[t._v("修改")]),t._v(" "),e("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"default",disabled:t.loading},on:{click:function(a){t.reset(1)}}},[t._v("返回")])],1)]),t._v(" "),e("Modal",{attrs:{width:"660"},on:{"on-cancel":function(a){t.reset(2)}},model:{value:t.addModal.open,callback:function(a){t.$set(t.addModal,"open",a)},expression:"addModal.open"}},[e("p",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("添加")])]),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("Form",{ref:"addModal.formData",attrs:{model:t.addModal.formData,"label-width":80}},[e("FormItem",{attrs:{label:"名称"}},[e("Input",{attrs:{type:"text"},model:{value:t.addModal.formData.nickname,callback:function(a){t.$set(t.addModal.formData,"nickname",a)},expression:"addModal.formData.nickname"}})],1),t._v(" "),e("FormItem",{attrs:{label:"头像"}},[e("MyUpload",{attrs:{pics:[t.addModal.formData.header],flag:2},on:{listenFileUpload:t.uploadFile,listenFileRemove:function(a){t.removeFile(2)}}})],1),t._v(" "),e("FormItem",{attrs:{label:"类型",prop:"type"}},[e("Select",{model:{value:t.addModal.formData.type,callback:function(a){t.$set(t.addModal.formData,"type",a)},expression:"addModal.formData.type"}},[e("Option",{attrs:{value:"1"}},[t._v("民间高手")]),t._v(" "),e("Option",{attrs:{value:"2"}},[t._v("业内专家")])],1)],1),t._v(" "),e("FormItem",{attrs:{label:"接口名",prop:"flag"}},[e("Select",{model:{value:t.addModal.formData.flag,callback:function(a){t.$set(t.addModal.formData,"flag",a)},expression:"addModal.formData.flag"}},[t._l(t.searchField[0][0].fields,function(a,o){return[e("Option",{attrs:{value:o}},[t._v(t._s(a))])]})],2)],1)],1)],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"primary",disabled:t.loading},on:{click:t.add}},[t._v("添加")]),t._v(" "),e("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"default",disabled:t.loading},on:{click:function(a){t.reset(2)}}},[t._v("返回")])],1)])],1)},staticRenderFns:[]},f=e("VU/8")(s,c,!1,null,null,null);a.default=f.exports},bC7Q:function(t,a){},rho9:function(t,a,e){"use strict";e.d(a,"c",function(){return n}),e.d(a,"e",function(){return i}),e.d(a,"d",function(){return d}),e.d(a,"b",function(){return l}),e.d(a,"a",function(){return r});var o=e("P9l9"),n=function(t,a){switch(t){case 1:a.modifyModal.formData.header="";break;case 2:a.addModal.formData.header=""}},i=function(t,a,e){t.append("type","header"),o.a.post("api/uploadImg",t).then(function(t){switch(a){case 1:e.modifyModal.formData.header=t.req.data.data;break;case 2:e.addModal.formData.header=t.req.data.data}})},d=function(t,a){switch(t){case 1:a.modifyModal.open=!1,a.modifyModal.formData={};break;case 2:a.addModal.open=!1,a.addModal.formData={}}},l=function(t,a){o.a.post(t,a.modifyModal.formData).then(function(t){a.modifyModal.open=!1,a.getSearchData()})},r=function(t,a){o.a.post(t,a.addModal.formData).then(function(t){a.addModal.open=!1,a.getSearchData()})}}});
//# sourceMappingURL=3.0ba089a206826ba71199.js.map